{{ define "main" }}
<main class="container mx-auto px-4">
  {{/* Prefer pages in this section, fallback to site-wide filter in case of custom routes */}}
  {{ $pubs := .Pages }}
  {{ if not $pubs }}
    {{ $pubs = where .Site.RegularPages "Section" "publication" }}
  {{ end }}

  {{ range ($pubs.GroupByDate "2006").Reverse }}
    <section class="mb-8" id="y-{{ .Key }}">
      <h2 class="year-heading text-2xl font-semibold mt-10 mb-4">
        {{ .Key }}
      </h2>
      <div class="space-y-6">
        {{ range .Pages.ByDate.Reverse }}
          {{ .Render "summary" }}
        {{ end }}
      </div>
    </section>
  {{ end }}
</main>

<style>
/* Simple, unobtrusive styling for the year label */
.year-heading{
  border-bottom: 1px solid rgba(0,0,0,.08);
  padding-bottom: .25rem;
}
</style>
{{ end }}
